<sl-dialog label="Contribute to Our ${{ funding.goal }} Goal" class="dialog-overview">

  <p>Enter the amount you'd like to contribute (in USD):</p>

  <sl-input
    id="contribution-amount"
    style="margin-bottom:1rem"
    size="medium"
    placeholder=""
    inputmode="numeric"
    minlength="2"
    maxlength="5"
    required
  >
    <sl-icon slot="prefix" library="remixicon" name="finance/money-dollar-circle-fill"></sl-icon>
  </sl-input>

  <p style="text-align:center">
    <sl-button type="success" size="large">
      <sl-icon slot="prefix" library="remixicon" name="finance/secure-payment"></sl-icon>
      Checkout with Stripe
    </sl-button>
  </p>
  
  <div style="margin-top:2rem" id="paypal-button-container"></div>

  <hr />

  <p style="text-align:center">Or choose a <a href="https://github.com/sponsors/jaredcwhite?frequency=one-time&sponsor=jaredcwhite" target="_blank">one-time payment option on GitHub</a></p>

  <sl-button slot="footer" type="primary">Done</sl-button>
</sl-dialog>

<pre id="output">

</pre>

<script src="https://www.paypal.com/sdk/js?client-id=AVhpton8gOV86lirTLxCn7F-o46PGGcSh4jcUDP0IiFf8yC8pypSWguMvJLbZQDX7tvOB7K6M9lVvRZY&currency=USD"></script>


<script type="module">
// const ppCliendId = "AVhpton8gOV86lirTLxCn7F-o46PGGcSh4jcUDP0IiFf8yC8pypSWguMvJLbZQDX7tvOB7K6M9lVvRZY"

  paypal.Buttons({

    style: {
      layout: "horizontal",
      color: "silver",
      tagline: false
    },

    // Sets up the transaction when a payment button is clicked
    createOrder: function(data, actions) {
      const amount = document.querySelector("#contribution-amount").value

      return actions.order.create({
        purchase_units: [{
          amount: {
            value: amount
          }
        }]
      });
    },

    // Finalize the transaction after payer approval
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(orderData) {
        // Successful capture! For dev/demo purposes:
            document.querySelector("pre").textContent = JSON.stringify(orderData, null, 2)
            const transaction = orderData.purchase_units[0].payments.captures[0];
            alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');

        // When ready to go live, remove the alert and show a success message within this page. For example:
        // var element = document.getElementById('paypal-button-container');
        // element.innerHTML = '';
        // element.innerHTML = '<h3>Thank you for your payment!</h3>';
        // Or go to another URL:  actions.redirect('thank_you.html');
      });
    }
  }).render('#paypal-button-container');
</script>